<apex:page controller="AccountDetailsViewController" tabStyle="Account_Details__tab">

    <apex:slds />

    <apex:form >
        <apex:pageBlock>
            
            <apex:actionFunction action="{!getAllDetails}" name="selectAccount" reRender="AccountInfoSection"/>

            Select Account:
            <apex:selectList size="1" value="{!accountId}" onchange="selectAccount()">
                <apex:selectOptions value="{!accountSelectOptionList}"/>
            </apex:selectList>
            
            <apex:pageBlockSection title="Account details" id="AccountInfoSection">

                <apex:outputField value="{!accountWithAllDetails.Name}"/>
                <apex:outputField value="{!accountWithAllDetails.AccountNumber}"/>
                <apex:outputField value="{!accountWithAllDetails.Type}"/>
                <apex:outputField value="{!accountWithAllDetails.AnnualRevenue }"/>
                <apex:outputField value="{!accountWithAllDetails.SLAExpirationDate__c}"/>
                <apex:outputField value="{!accountWithAllDetails.Industry}"/>
                <apex:outputField value="{!accountWithAllDetails.Rating}"/>
                <apex:outputField value="{!accountWithAllDetails.NumberOfEmployees}"/>
                <apex:outputField value="{!accountWithAllDetails.Phone}"/>
                <apex:outputField value="{!accountWithAllDetails.Fax}"/>

                <apex:pageBlockSection columns="1" title="Related contacts">
                    <apex:pageBlockTable value="{!contactList}" var="contact">
                        <apex:column value="{!contact.Name}"/>
                        <apex:column value="{!contact.Title}"/>
                        <apex:column value="{!contact.Phone}"/>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>

                <br/>

                <apex:outputPanel>
                    <apex:commandLink action="{!previousContactsPage}" value="Previous page" rendered="{!hasPrevious}"/>
                    &nbsp;&nbsp;&nbsp;
                    <apex:commandLink action="{!nextContactsPage}" value="Next page" rendered="{!hasNext}"/>
                </apex:outputPanel>

            </apex:pageBlockSection>

            <apex:pageBlockButtons location="bottom">
                <apex:commandButton action="{!openAccountForm}" title="New Account" value="New Account" rendered="true"/>
                <apex:commandButton action="{!openContactForm}" title="New Contact" value="New Contact" rendered="true"/>
            </apex:pageBlockButtons>

            <apex:pageBlockSection title="Add account" columns="1" rendered="{!isAccountForm}">
                <apex:inputField value="{!newAccount.Name}"/>
                <apex:outputPanel>
                    <apex:commandButton action="{!closeAccountForm}" immediate="true" value="Cancel" />
                    <apex:commandButton action="{!saveAccount}" value="Save" />
                </apex:outputPanel>
            </apex:pageBlockSection>
        
            <apex:pageBlockSection title="Add contact" columns="1" rendered="{!isContactForm}">
                <apex:inputField value="{!newContact.FirstName}"/>
                <apex:inputField value="{!newContact.LastName}"/>
                <apex:outputPanel>
                    <apex:commandButton action="{!closeContactForm}" immediate="true" value="Cancel" />
                    <apex:commandButton action="{!saveContact}" value="Save" />
                </apex:outputPanel>
            </apex:pageBlockSection>
            
        </apex:pageBlock>
    </apex:form> 
</apex:page>